---
layout: post
title: Haskell, GHC, Cabal, and all that jazz
date: '2013-12-20T13:45:00.001-08:00'
author: Dat Le
tags: 
modified_time: '2014-08-11T03:51:58.776-07:00'
comments: true
blogger_id: tag:blogger.com,1999:blog-3261104696526323937.post-1982105194240290958
blogger_orig_url: http://lenguyenthedat.blogspot.com/2013/12/haskell-ghc-cabal-and-all-that-jazz.html
---

<i>Update: for OS X, do have a look at&nbsp;http://ghcformacosx.github.io/</i><br /><br />As a (somewhat) newcomer to Haskell, it's super hard for me to fully understand about these things. To be honest, at first, I wanted to just write Haskell code, but that plan didn't really work, because I didn't know how to properly install a package, how to resolve problem when doing so, how to build my Haskell projects...<br /><br />So, in order to help me remember, and help other newcomers, below is a list of instructions on how to deal with many of those problems:<br />(For the purpose of this blog post, I had spinned off a fresh (<strike>micro</strike> small) <b><u>Ubuntu 12.04 64 bit</u></b> on AWS.)<br /><ol><li><b>Installing (latest) GHC</b></li><ul><li>Go to http://www.haskell.org/ghc/ to download your latest GHC release. For example, for my Ubuntu 12.04 64 bit:</li><li><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">$ wget http://www.haskell.org/ghc/dist/7.6.3/ghc-7.6.3-x86_64-unknown-linux.tar.bz2<br />$ tar -xvf ghc-7.6.3-x86_64-unknown-linux.tar.bz2<br />$ sudo apt-get update<br />$ sudo apt-get install libgmp3c2 build-essential # for libgmp and gcc<br />$ cd ghc-7.6.3/<br />$ ./configure<br />$ sudo make install</span></pre></li><li>You should have the latest GHC by now (you might need to open a new terminal):</li><li><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">$ which ghc<br />/usr/local/bin/ghc<br />$ ghc --version<br />The Glorious Glasgow Haskell Compilation System, version 7.6.3</span></pre></li></ul><ul> </ul><li><b>Installing (latest) Cabal</b></li><ul><li>Starting by installing and updating cabal's package list:</li><li><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">$ sudo apt-get install cabal-install<br />$ cabal update<br />$ sudo apt-get install zlib1g-dev # for the below step<br />$ cabal install cabal cabal-install # updating cabal version<br />$ cabal --version # might need to open a new terminal</span></pre></li><li>Remember to fix your PATH variable:</li><li><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); color: #333333; font-size: 14px; height: auto; line-height: 19px; overflow: auto; padding: 0px; text-align: justify; width: 646.46875px;"><span style="line-height: 20px;">$ export PATH=$HOME/.cabal/bin:$PATH # you might want to add this into your ~/.bashrc</span></pre></li><li>Note: Skip this step if you already have the latest cabal version needed from the above commands. For the latest Cabal (currently 1.19x) and cabal-install (1.19x), clone the cabal Repository and install from source:</li><li><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">$ sudo apt-get install git # incase you don't have (g)it yet.<br />$ git clone https://github.com/haskell/cabal.git<br />$ cd cabal/<br />$ cabal install Cabal/ cabal-install/<br />$ cabal --version<br />cabal-install version 1.19.2<br />using version 1.19.2 of the Cabal library </span></pre></li></ul><li><b>Building your first Haskell Project</b></li><ul><li>I prefer to use Cabal Sandbox for this purpose.</li><li>Starting with "cabal sandbox init" in your project folder:</li><li style="margin: 0px; outline: none; padding: 0px;"><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; text-align: justify; width: 646.46875px;"><span style="color: #333333;"><span style="font-size: 14px; line-height: 20px;">$ cd /path/to/project/folder<br />$ cabal sandbox init</span></span><span style="color: #333333; font-size: 14px; line-height: 19px;"><br /></span></pre></li><li style="margin: 0px; outline: none; padding: 0px;"><div style="text-align: justify;">Continue development if needed and use runhaskell for testing / debugging purpose. (Note: there is a bug that prevents runhaskell to work properly within Cabal Sandbox folder, you will need to export&nbsp;GHC_PACKAGE_PATH): (ghc-pkg list for your global package database location, in my case, it's&nbsp;/usr/local/lib/ghc-7.6.3/package.conf.d)</div></li><li style="margin: 0px; outline: none; padding: 0px;"><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">$ export GHC_PACKAGE_PATH=$(pwd)/.cabal-sandbox/x86_64-linux-ghc-7.6.3-packages.conf.d:/usr/local/lib/ghc-7.6.3/package.conf.d<br />$ runhaskell main.hs</span></pre></li><li>If a new package / dependency needs to be installed:</li><li style="margin: 0px; outline: none; padding: 0px;"><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">$ unset GHC_PACKAGE_PATH<br />$ cabal install &lt;dependency&gt;</span></pre></li><li>Ready to build:</li><li style="margin: 0px; outline: none; padding: 0px;"><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">$ cabal init # fill in your project details, update main class in .cabal file, add LICENSE file<br />$ cabal install</span></pre></li><li>Running your program:</li><li style="margin: 0px; outline: none; padding: 0px;"><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">$ </span><span style="background-color: transparent;">.cabal-sandbox/bin/&gt;executable&gt;</span></pre></li></ul></ol><div><span style="font-family: monospace;"><span style="white-space: pre;"><b style="text-decoration: underline;">Note</b>: <i>cabal install</i> sometimes fails when looking for executables located in <i>~/.cabal/bin/</i></span></span></div><div><span style="font-family: monospace;"><span style="white-space: pre;"><br /></span></span></div><div><span style="font-family: monospace;"><span style="white-space: pre;">For example:</span></span></div><div><span style="font-family: monospace;"><span style="white-space: pre;"><br /></span></span></div><div><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">setup: The program happy version &gt;=1.17 is required but it could not be found.<br /></span></pre></div><div><span style="line-height: 20px;"><br /></span></div><div><span style="font-family: monospace;"><span style="white-space: pre;">To install those (without touching global package database), you can follow the below steps:</span></span></div><div><span style="font-family: monospace;"><span style="white-space: pre;"><br /></span></span></div><div><div><pre style="background-color: #f0f0f0; border: 1px dashed rgb(204, 204, 204); height: auto; overflow: auto; padding: 0px; width: 646.46875px;"><span style="line-height: 20px;">  $ mkdir tmp<br />  $ cd tmp/<br />  $ cabal sandbox init<br />  $ cabal install happy --prefix=&lt;PATH_TO_HOME_DIRECTORY&gt;/.cabal/ # Note, you can not use tilde (~) for the path<br />  $ happy --version</span></pre></div></div><div><ol><ul></ul></ol></div><ol><ul><ul></ul></ul></ol>